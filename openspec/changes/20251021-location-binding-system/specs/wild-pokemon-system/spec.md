# 野生宝可梦系统规范

## ADDED Requirements

### Requirement: 地点特定的宝可梦池
每个地点应该有其特有的野生宝可梦池。

#### Scenario: 地点宝可梦差异
```
Given: 常青森林的宝可梦池包含: 妙蛙种子、小虫、小鸟、小拳石
And: 月见山的宝可梦池包含: 小拳石、超音蝠、穿山鼠
When: 玩家在常青森林遭遇宝可梦
Then: 遭遇的应该是来自常青森林池的宝可梦
And: 不应该出现超音蝠 (月见山特定)
```

#### Scenario: 宝可梦等级范围
```
Given: 常青森林中小虫的等级范围为 2-5
When: 玩家遭遇小虫
Then: 等级应该在 2-5 之间随机
And: 不应该出现等级 1 或等级 6 的小虫
```

---

### Requirement: 加权随机遭遇
宝可梦应该根据其在池中的权重随机选择。

#### Scenario: 权重遭遇
```
Given: 常青森林中:
  - 小虫: spawn_rate = 50 (50%)
  - 小鸟: spawn_rate = 30 (30%)
  - 小拳石: spawn_rate = 20 (20%)
When: 多次尝试遭遇
Then: 长期统计应该接近:
  - 小虫 ~50%
  - 小鸟 ~30%
  - 小拳石 ~20%
```

---

### Requirement: 遭遇预览系统
玩家应该在决定行动前看到野生宝可梦的完整信息。

#### Scenario: 遭遇信息显示
```
Given: 玩家在月见山遭遇宝可梦
When: 遭遇发生
Then: 应该显示:
  ┌─────────────────────────┐
  │  野生宝可梦出现!       │
  ├─────────────────────────┤
  │  名字: 超音蝠          │
  │  等级: 8               │
  │  类型: 超音波/飞行     │
  │  当前环境: 山地        │
  │  属性加成: +10% 攻击   │
  │                        │
  │  属性预览:             │
  │    HP: 40              │
  │    攻击: 56 (→ 61)     │
  │    防守: 35            │
  │    特攻: 41            │
  │    特防: 44            │
  │    速度: 81            │
  ├─────────────────────────┤
  │ 1. 捕捉  2. 战斗  3. 逃跑 │
  └─────────────────────────┘
```

#### Scenario: 环境加成在预览中显示
```
Given: 玩家在草地遭遇皮卡丘，基础速度 90
And: 草地提供速度 +10% 加成
When: 预览显示
Then: 应该显示:
  速度: 90 → 99 (当前环境 +10%)
```

---

### Requirement: 遭遇率
地点应该有可配置的遭遇率。

#### Scenario: 高遭遇率地点
```
Given: 常青森林的遭遇率为 0.8 (80%)
When: 玩家选择探索
Then: 应该有 80% 的概率遭遇野生宝可梦
```

#### Scenario: 低遭遇率地点
```
Given: 城市地点的遭遇率为 0.2 (20%)
When: 玩家选择探索
Then: 应该有 20% 的概率遭遇野生宝可梦
And: 80% 的概率不遭遇
```

---

## MODIFIED Requirements

### Requirement: 战斗系统集成
野生遭遇应该能无缝进入战斗系统。

#### Scenario: 从预览到战斗
```
Given: 玩家看到野生宝可梦预览
And: 选择 "战斗"
When: 进入战斗
Then: 战斗应该使用原始属性 (不含加成)
And: 加成只在预览中显示
```

### Requirement: 捕捉系统集成
野生宝可梦遭遇应该支持捕捉。

#### Scenario: 捕捉选项
```
Given: 玩家看到野生宝可梦预览
When: 玩家选择 "捕捉"
Then: 应该进入捕捉流程
And: 使用标准捕捉概率计算
And: 捕捉成功后获得该宝可梦
```

